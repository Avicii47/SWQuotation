
@{
    ViewBag.Title = "Test";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script src="~/Scripts/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.2/jspdf.min.js"></script>
<script src="~/cdnjs/html2pdf.bundle.min.js"></script>
<input id="Btnsuccess" class="btn btn-secondary" type="button" value="Send Email" onclick="Send();" />&ensp;
<script>
    function Send() {
        debugger
        var pdfData = generatePdf();
        function generatePdf() {
            var doc = new jsPdf();
            doc.text("jsPDF to Mail", 40, 30);
            var binary = doc.output();
            return binary ? btoa(binary) : "";

        }

        if (!pdfData)
            return;
        debugger
        var email = "gadpayarel@gmail.com";
        var quotId = "QTA000037";
        var name = "Lokesh";
        debugger
        var reqData = {
            attachment: pdfData,
            quot: 'Quotation Number ' + quotId + '.pdf',
            Email: email,
            Name: name
        };
        $.ajax({
            type: "POST",
            url: "../Customers/sendemail",
            data: JSON.stringify({ data: reqData }),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (response) {
                debugger
                Swal.fire({
                    icon: 'success',
                    title: 'Mail Send!',
                });
            },
            error: function (respose) {
                Swal.fire({
                    icon: 'error',
                    title: 'Something went Wrong',
                    text: 'Error in sending Email',
                });
            }
        });
    }
</script>


